---
title: "От вектора к текстам в R"
author: "Konstantin Ivanin"
date: '25 сентября 2017 г '
output:
  html_document: default
  pdf_document:
    latex_engine: xelatex
mainfont: Ubuntu
---

# Растояния и другое

Загрузим библиотеки
```{r, message=FALSE}
library(stringr)
library(tidyverse)
library(tidyr)
library(readr)
library(stringi)
library(stringr)
```

## Чистка html тегов
В мире достаточно много готовых решений по чистке html и xml тегов, так что настало время изобрести велосипед. Напишите функцию `tagless()`, которая убирает из строки теги.
```{r}
tagless <- function(str) {
  return(str_replace_all(str, '<[^>]*>', ''))
}

tagless('<greeting>Hello, world!</greeting>')
```

## Лишние пробелы
Напишите функцию `spaceless()`, которая убирает лишние пробелы.
```{r}
spaceless <- function(str) {
  return(str_replace_all(str, '\\s+', ' '))
}

spaceless(c('two  spaces', 'five     spaces'))
```

# Функция для проверки полиндромности
Улучшите функцию `is.palindrome()`, чтобы она могла учесть знаки препинания, пробелы и т. п.
```{r}
is.palindrome <- function(str) {
  str %<>%
    str_to_lower() %>% 
    str_replace_all('[:punct:]', '') %>% 
    str_replace_all('\\s+', '')
  return(str == stri_reverse(str))
}

is.palindrome('Замучен он, но не чумаз')
is.palindrome('Замучена она, но не чумаза')
```

Скачайте [произведение Жоржа Перека](https://raw.githubusercontent.com/agricolamz/2017_ANDAN_course/master/docs/materials/Perec_palindrome.txt), посчитайте количество символов в нем и проверьте на полиндромность. Мой вариант несколько препарирован, оригинал можно найти [здесь](http://cui.unige.ch/isi/cours/javalettres/perec.txt).
```{r}
perec <- readLines('data/Perec_palindrome.txt')
perec <- paste(perec, collapse = ' ')
words <- perec %>% 
  str_split(' ') 
paste('Слов', length(words[[1]]))
is.palindrome(perec)
```

## Спеллчекер? Легко!
Скачайте [словарь форм русского языка](https://raw.githubusercontent.com/agricolamz/2017_ANDAN_course/master/docs/materials/rus_all_forms.csv) (осторожно, большой файл) на основе словаря А. А. Залязняка и сделайте функцию `spellcheck()`, которая возвращает слова из строки, которых нет в словаре; если аргумент `suggestions = TRUE`, то возвращает слово с минимальным расстояние Дамерау — Левенштейна.
```{r}
spellcheck <- function(word, suggestions = TRUE) {
  
}


```








